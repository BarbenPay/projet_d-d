version: "2.0"

rules:

# --- Règle pour interrompre les settings du jeu ---
- rule: Interruption game settings
  condition:
  - active_loop: game_settings_form  # On nomme explicitement le form (String)
  steps:
  - intent: user_choose_reset      # "Stop", "Annuler"
  - action: action_deactivate_loop # On tue la loop
  - active_loop: null              # On confirme qu'elle est morte
  - action: utter_confirm_settings_game # Optionnel : retour au menu précédent

# --- Règle pour interrompre la création de perso ---
- rule: Interruption character creation
  condition:
  - active_loop: caracter_creation_form # On nomme explicitement le form (String)
  steps:
  - intent: user_choose_reset
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_confirm_story # Optionnel : retour au menu 
  
- rule: Start Adventure Loop
  steps:
  - action: caracter_creation_form
  - active_loop: null
  - action: utter_confirm_character
  - intent: affirm
  - action: adventure_form      # On lance le formulaire d'aventure
  - active_loop: adventure_form # On confirme qu'il est actif

- rule: Stop Adventure Loop (Reset)
  condition:
  - active_loop: adventure_form
  steps:
  - intent: user_choose_reset   # Seul cet intent peut casser la boucle grâce au 'not_intent' du domain
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_give_help     # Ou retour au menu